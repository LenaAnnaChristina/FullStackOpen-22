{"ast":null,"code":"import _objectSpread from\"C:/Users/lena.nyman/FullStack_2022-original/Part2/phonebook/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import personService from'../services/persons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonForm=function PersonForm(_ref){var newName=_ref.newName,setNewName=_ref.setNewName,newNumber=_ref.newNumber,setNewNumber=_ref.setNewNumber,persons=_ref.persons,setPersons=_ref.setPersons,setConfirmMessage=_ref.setConfirmMessage,setStyle=_ref.setStyle;var handleSubmit=function handleSubmit(event){event.preventDefault();if(persons.find(function(element){return element.name===newName;})){if(window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"))){var thisPerson=persons.find(function(p){return p.name===newName;});var changedPerson=_objectSpread(_objectSpread({},thisPerson),{},{number:newNumber});personService.update(thisPerson.id,changedPerson).then(function(returnedPerson){setConfirmMessage(\"Updated \".concat(newName));setStyle('blue');setTimeout(function(){setConfirmMessage(null);},5000);setPersons(persons.map(function(p){return p.id!==thisPerson.id?p:changedPerson;}));}).catch(function(error){setConfirmMessage(\"Information of \".concat(newName,\" has been removed from server\"));setStyle('red');setTimeout(function(){setConfirmMessage(null);},5000);});}else{console.log('You cancelled to update phone number.');}}else{var personObject={name:newName,number:newNumber};personService.create(personObject).then(function(returnedPerson){setConfirmMessage(\"Added \".concat(newName));setStyle('green');setTimeout(function(){setConfirmMessage(null);},5000);setPersons(persons.concat(returnedPerson));setNewName('');setNewNumber('');}).catch(function(error){return console.log('fail');});}};return/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"name: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newName,onChange:function onChange(e){return setNewName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"number: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newNumber,onChange:function onChange(e){return setNewNumber(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:handleSubmit,children:\"add\"})})]});};export default PersonForm;","map":{"version":3,"sources":["C:/Users/lena.nyman/FullStack_2022-original/Part2/phonebook/src/components/PersonForm.js"],"names":["React","personService","PersonForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setConfirmMessage","setStyle","handleSubmit","event","preventDefault","find","element","name","window","confirm","thisPerson","p","changedPerson","number","update","id","then","returnedPerson","setTimeout","map","catch","error","console","log","personObject","create","concat","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst PersonForm = ({newName, setNewName, newNumber, setNewNumber, persons, setPersons, setConfirmMessage, setStyle}) => {\r\n  const handleSubmit = (event) => {\r\n      event.preventDefault()\r\n\r\n      if (persons.find(element => element.name === newName )) {\r\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const thisPerson = persons.find(p => p.name === newName)\r\n        const changedPerson = {...thisPerson, number: newNumber}\r\n        personService\r\n          .update(thisPerson.id, changedPerson)\r\n          .then( returnedPerson => {\r\n            setConfirmMessage(`Updated ${newName}`)\r\n            setStyle('blue')\r\n            setTimeout(() => {\r\n              setConfirmMessage(null)\r\n            }, 5000)\r\n            setPersons(persons.map(p => p.id !== thisPerson.id ? p : changedPerson))\r\n          })\r\n          .catch(error => {\r\n            setConfirmMessage(`Information of ${newName} has been removed from server`)\r\n            setStyle('red')\r\n            setTimeout(() => {\r\n              setConfirmMessage(null)\r\n            }, 5000)\r\n          })\r\n      } else {console.log('You cancelled to update phone number.');}}\r\n      else {\r\n        const personObject = {\r\n          name: newName,\r\n          number: newNumber,\r\n        }\r\n        personService\r\n          .create(personObject)\r\n          .then(returnedPerson => {\r\n            setConfirmMessage(`Added ${newName}`)\r\n            setStyle('green')\r\n            setTimeout(() => {\r\n              setConfirmMessage(null)\r\n            }, 5000)\r\n            setPersons(persons.concat(returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n          }) \r\n          .catch(error => console.log('fail'))\r\n      }\r\n  }\r\n  return (\r\n      <form>\r\n          <div>\r\n          name: <input \r\n          type=\"text\" \r\n          value={newName} \r\n          onChange={(e)=>setNewName(e.target.value)}\r\n              />\r\n          </div>\r\n          <div>\r\n          number: <input\r\n              type=\"text\"\r\n              value={newNumber}\r\n              onChange={(e)=>setNewNumber(e.target.value)}\r\n              />\r\n          </div>\r\n          <div>\r\n              <button type=\"submit\" onClick={handleSubmit}>add</button>\r\n          </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm"]},"metadata":{},"sourceType":"module"}