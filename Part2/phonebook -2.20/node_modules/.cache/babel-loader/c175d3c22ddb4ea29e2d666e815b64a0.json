{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\lena.nyman\\\\FullStack_2022-original\\\\Part2\\\\phonebook\\\\src\\\\components\\\\PersonForm.js\";\n\nimport React from 'react';\nimport personService from '../services/persons';\n\nvar PersonForm = function PersonForm(_ref) {\n  var newName = _ref.newName,\n      setNewName = _ref.setNewName,\n      newNumber = _ref.newNumber,\n      setNewNumber = _ref.setNewNumber,\n      persons = _ref.persons,\n      setPersons = _ref.setPersons,\n      setMessage = _ref.setMessage,\n      setStyle = _ref.setStyle;\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n\n    if (persons.find(function (element) {\n      return element.name === newName;\n    })) {\n      if (window.confirm(\"\".concat(newName, \" is already added to phonebook, replace the old number with a new one?\"))) {\n        var thisPerson = persons.find(function (p) {\n          return p.name === newName;\n        });\n        var changedPerson = {\n          thisPerson: thisPerson,\n          number: newNumber\n        };\n        personService.update(thisPerson.id, changedPerson).then(function (returnedPerson) {\n          setMessage(\"Updated \".concat(newName));\n          setStyle('blue');\n          setPersons(persons.map(function (p) {\n            return p.id !== thisPerson.id ? p : changedPerson;\n          }));\n        }).catch(function (error) {\n          setMessage(\"Information of \".concat(newName, \" has been removed from server\")), type;\n          \"fail\"; //setStyle('red')\n        });\n      }\n    } else {\n      var personObject = {\n        name: newName,\n        number: newNumber\n      };\n      personService.create(personObject).then(function (returnedPerson) {\n        setMessage(\"Added \".concat(newName));\n        setStyle('green');\n        setPersons(persons.concat(returnedPerson));\n        setNewName('');\n        setNewNumber('');\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  }, \"name: \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: newName,\n    onChange: function onChange(e) {\n      return setNewName(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }\n  }, \"number: \", /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: newNumber,\n    onChange: function onChange(e) {\n      return setNewNumber(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, \"add\")));\n};\n\nexport default PersonForm;","map":{"version":3,"sources":["C:/Users/lena.nyman/FullStack_2022-original/Part2/phonebook/src/components/PersonForm.js"],"names":["React","personService","PersonForm","newName","setNewName","newNumber","setNewNumber","persons","setPersons","setMessage","setStyle","handleSubmit","event","preventDefault","find","element","name","window","confirm","thisPerson","p","changedPerson","number","update","id","then","returnedPerson","map","catch","error","type","personObject","create","concat","e","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\n\r\nconst PersonForm = ({newName, setNewName, newNumber, setNewNumber, persons, setPersons, setMessage, setStyle}) => {\r\n  const handleSubmit = (event) => {\r\n      event.preventDefault()\r\n\r\n      if (persons.find(element => element.name === newName )) {\r\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        const thisPerson = persons.find(p => p.name === newName)\r\n        const changedPerson = {thisPerson, number: newNumber}\r\n\r\n        personService\r\n          .update(thisPerson.id, changedPerson)\r\n          .then( returnedPerson => {\r\n            setMessage(`Updated ${newName}`)\r\n            setStyle('blue')            \r\n            setPersons(persons.map(p => p.id !== thisPerson.id ? p : changedPerson))\r\n          })\r\n          .catch(error => {\r\n            setMessage(`Information of ${newName} has been removed from server`),\r\n            type; \"fail\"\r\n            //setStyle('red')\r\n            \r\n          })\r\n      }\r\n    }\r\n      else {\r\n        const personObject = {name: newName, number: newNumber}\r\n        personService\r\n          .create(personObject)\r\n          .then(returnedPerson => {\r\n            setMessage(`Added ${newName}`)\r\n            setStyle('green')           \r\n            setPersons(persons.concat(returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n          }) \r\n      }\r\n  }\r\n  return (\r\n      <form>\r\n          <div>\r\n          name: <input \r\n          type=\"text\" \r\n          value={newName} \r\n          onChange={(e)=>setNewName(e.target.value)}\r\n              />\r\n          </div>\r\n          <div>\r\n          number: <input\r\n              type=\"text\"\r\n              value={newNumber}\r\n              onChange={(e)=>setNewNumber(e.target.value)}\r\n              />\r\n          </div>\r\n          <div>\r\n              <button type=\"submit\" onClick={handleSubmit}>add</button>\r\n          </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm"]},"metadata":{},"sourceType":"module"}